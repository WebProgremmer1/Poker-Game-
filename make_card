import gradio as gr
import matplotlib.pyplot as plt
from matplotlib.patches import Rectangle, Polygon
import matplotlib.patheffects as pe


custom_theme = gr.themes.Soft(primary_hue="red").set(
    color_accent="#9C0505",
)

DARK_RED = '#9C0505'
BLACK = '#000000'


def demo_function(text):
    return text

def clear_function(text):
    return '', ''
    
with gr.Blocks(fill_height=True, theme=custom_theme) as demo:
    gr.Markdown("QuickSort Cards Addition ♠, ♥, ♦, ♣")
    with gr.Row():
        with gr.Column():
            input_text = gr.components.Textbox(label ='Enter number of cards (up to 52)')
            with gr.Row():
                submit = gr.components.Button(value = 'Shuffle', variant ='primary')
        
        output_text = gr.components.Textbox(lines=3, label ='Shuffled desk')

    submit.click(demo_function, [input_text], [output_text])


# change the varaibles 
def make_card(n:int=5, color:str=DARK_RED):
    fig, ax = plt.subplots(figsize=(3,4), dpi=160)
    ax.set_facecolor("white")
    fig.patch.set_facecolor("white")

    width, height = 0.75, 1
    left, bottom = -width/2, -height/2

    rect = Rectangle((left, bottom), width, height, fill=False, linewidth=3, edgecolor=color)
    ax.add_patch(rect)

    ax.text(0, 0.05, str(n),
            ha="center", va="center",
            fontsize=15, color=color,
            fontweight="bold")


    ax.set_xlim(-1.6, 1.6)
    ax.set_ylim(-2.2, 2.2)
    ax.set_aspect("equal")
    ax.axis("off")
    return fig

# def multiple_cards(num_cards):
#     figures = []
#     for i in range(num_cards):
#         figures.append(make_card(i + 1))
#     return figures



with gr.Blocks(title="Red Card") as demo:
    with gr.Row():
        n = gr.Slider(0, 14, value=5, step=1, label="Number") # random from backend
    plot = gr.Plot(label="Preview")
    btn = gr.Button("Render")
    # live updates on change and on click
    n.change(make_card, [n], plot)
    btn.click(make_card, [n], plot)



if __name__ == '__main__':
    demo.launch()
